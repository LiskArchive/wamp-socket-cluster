!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wampSocketCluster",[],t):"object"==typeof exports?exports.wampSocketCluster=t():e.wampSocketCluster=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=16)}([function(e,t,r){"use strict";function n(e,t){return t+": "+e.toString()+"\n"}function o(e,t,r,n){"object"===(void 0===r?"undefined":c(r))?t[n]=a(e[n],r):-1===e.indexOf(r)&&t.push(r)}function i(e,t,r){t[r]=e[r]}function s(e,t,r,n){"object"===c(t[n])&&t[n]&&e[n]?r[n]=a(e[n],t[n]):r[n]=t[n]}function a(e,t){var r=Array.isArray(t),n=r&&[]||{};return r?(e=e||[],n=n.concat(e),t.forEach(o.bind(null,e,n))):(e&&"object"===(void 0===e?"undefined":c(e))&&Object.keys(e).forEach(i.bind(null,e,n)),Object.keys(t).forEach(s.bind(null,e,t,n))),n}function u(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=r(2),f=t.ValidationError=function(e,t,r,n,o,i){n&&(this.property=n),e&&(this.message=e),r&&(r.id?this.schema=r.id:this.schema=r),t&&(this.instance=t),this.name=o,this.argument=i,this.stack=this.toString()};f.prototype.toString=function(){return this.property+" "+this.message};var l=t.ValidatorResult=function(e,t,r,n){this.instance=e,this.schema=t,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.disableFormat=r&&!0===r.disableFormat};l.prototype.addError=function(e){var t;if("string"==typeof e)t=new f(e,this.instance,this.schema,this.propertyPath);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new f(e.message,this.instance,this.schema,this.propertyPath,e.name,e.argument)}if(this.throwError)throw t;return this.errors.push(t),t},l.prototype.importErrors=function(e){"string"==typeof e||e&&e.validatorType?this.addError(e):e&&e.errors&&Array.prototype.push.apply(this.errors,e.errors)},l.prototype.toString=function(e){return this.errors.map(n).join("")},Object.defineProperty(l.prototype,"valid",{get:function(){return!this.errors.length}});var p=t.SchemaError=function e(t,r){this.message=t,this.schema=r,Error.call(this,t),Error.captureStackTrace(this,e)};p.prototype=Object.create(Error.prototype,{constructor:{value:p,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var m=t.SchemaContext=function(e,t,r,n,o){this.schema=e,this.options=t,this.propertyPath=r,this.base=n,this.schemas=o};m.prototype.resolve=function(e){return h.resolve(this.base,e)},m.prototype.makeChild=function(e,t){var r=void 0===t?this.propertyPath:this.propertyPath+y(t),n=h.resolve(this.base,e.id||""),o=new m(e,this.options,r,n,Object.create(this.schemas));return e.id&&!o.schemas[n]&&(o.schemas[n]=e),o};var d=t.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(e){t=!1}return t},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};d.regexp=d.regex,d.pattern=d.regex,d.ipv4=d["ip-address"],t.isFormat=function(e,t,r){if("string"==typeof e&&void 0!==d[t]){if(d[t]instanceof RegExp)return d[t].test(e);if("function"==typeof d[t])return d[t](e)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[t])return r.customFormats[t](e);return!0};var y=t.makeSuffix=function(e){return e=e.toString(),e.match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};t.deepCompareStrict=function e(t,r){if((void 0===t?"undefined":c(t))!==(void 0===r?"undefined":c(r)))return!1;if(t instanceof Array)return r instanceof Array&&(t.length===r.length&&t.every(function(n,o){return e(t[o],r[o])}));if("object"===(void 0===t?"undefined":c(t))){if(!t||!r)return t===r;var n=Object.keys(t),o=Object.keys(r);return n.length===o.length&&n.every(function(n){return e(t[n],r[n])})}return t===r},e.exports.deepMerge=a,t.objectGetPath=function(e,t){for(var r,n=t.split("/").slice(1);"string"==typeof(r=n.shift());){var o=decodeURIComponent(r.replace(/~0/,"~").replace(/~1/g,"/"));if(!(o in e))return;e=e[o]}return e},t.encodePath=function(e){return e.map(u).join("")}},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o,i,s=r(4).Validator,a=new s,u={id:"/RPCResponse",type:"object",properties:{data:{},error:{},procedure:{type:"string"},signature:{type:"string"},success:{type:"boolean"},type:{type:"string"}},required:["type","procedure","signature","success","error"]},c={id:"/RPCRequest",type:"object",properties:{data:{},signature:{type:"string"},procedure:{type:"string"},type:{type:"string"}},required:["type","procedure"]},h={id:"/EventRequestSchema",type:"object",properties:{data:{},procedure:{type:"string"},type:{type:"string"}},required:["type","procedure"]},f={id:"/MasterRPCRequest",type:"object",properties:{data:{},procedure:{type:"string"},signature:{type:"string"},socketId:{type:"string"},type:{type:"string"},workerId:{type:"number"}},required:["workerId","socketId","type","procedure"]},l={id:"/InterProcessRPCResponseSchema",type:"object",properties:{data:{},error:{},procedure:{type:"string"},signature:{type:"string"},socketId:{type:"string"},success:{type:"boolean"},type:{type:"string"},workerId:{type:"number"}},required:["workerId","socketId","signature","type","procedure","success"]},p={id:"/InterProcessRPCRequestSchema",type:"object",properties:{data:{},procedure:{type:"string"},signature:{type:"string"},socketId:{type:"string"},type:{type:"string"},workerId:{type:"number"}},required:["workerId","socketId","signature","type","procedure"]},m={id:"/MasterConfigResponseSchema",type:"object",properties:{registeredEvents:{type:"array"},config:{type:"object"},type:{type:"string"}},required:["type"]},d={id:"/MasterConfigRequestSchema",type:"object",properties:{type:{type:"string"}},required:["type"]},y=(o={},n(o,u.id,c.id),n(o,l.id,p.id),n(o,m.id,d.id),o),v=(i={},n(i,c.id,u.id),n(i,f.id,u.id),n(i,p.id,l.id),n(i,d.id,m.id),i),g=function(e,t){return a.validate(e,t).valid&&e.type===t.id};e.exports={EventRequestSchema:h,RPCRequestSchema:c,RPCResponseSchema:u,InterProcessRPCRequestSchema:p,InterProcessRPCResponseSchema:l,MasterRPCRequestSchema:f,MasterConfigRequestSchema:d,MasterConfigResponseSchema:m,resToReqMap:y,reqToResMap:v,isValid:g}},function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,r){if(e&&h.isObject(e)&&e instanceof n)return e;var o=new n;return o.parse(e,t,r),o}function i(e){return h.isString(e)&&(e=o(e)),e instanceof n?e.format():n.prototype.format.call(e)}function s(e,t){return o(e,!1,!0).resolve(t)}function a(e,t){return e?o(e,!1,!0).resolveObject(t):t}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=r(7),h=r(11);t.parse=o,t.resolve=s,t.resolveObject=a,t.format=i,t.Url=n;var f=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,m=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(m),y=["'"].concat(d),v=["%","/","?",";","#"].concat(y),g=["/","?","#"],b=/^[+a-z0-9A-Z_-]{0,63}$/,S=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},A={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O=r(10);n.prototype.parse=function(e,t,r){if(!h.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===e?"undefined":u(e)));var n=e.indexOf("?"),o=-1!==n&&n<e.indexOf("#")?"?":"#",i=e.split(o),s=/\\/g;i[0]=i[0].replace(s,"/"),e=i.join(o);var a=e;if(a=a.trim(),!r&&1===e.split("#").length){var l=p.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],this.query=t?O.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var m=f.exec(a);if(m){m=m[0];var d=m.toLowerCase();this.protocol=d,a=a.substr(m.length)}if(r||m||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===a.substr(0,2);!E||m&&A[m]||(a=a.substr(2),this.slashes=!0)}if(!A[m]&&(E||m&&!x[m])){for(var j=-1,R=0;R<g.length;R++){var P=a.indexOf(g[R]);-1!==P&&(-1===j||P<j)&&(j=P)}var C,q;q=-1===j?a.lastIndexOf("@"):a.lastIndexOf("@",j),-1!==q&&(C=a.slice(0,q),a=a.slice(q+1),this.auth=decodeURIComponent(C)),j=-1;for(var R=0;R<v.length;R++){var P=a.indexOf(v[R]);-1!==P&&(-1===j||P<j)&&(j=P)}-1===j&&(j=a.length),this.host=a.slice(0,j),a=a.slice(j),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var k=this.hostname.split(/\./),R=0,F=k.length;R<F;R++){var M=k[R];if(M&&!M.match(b)){for(var $="",T=0,z=M.length;T<z;T++)M.charCodeAt(T)>127?$+="x":$+=M[T];if(!$.match(b)){var L=k.slice(0,R),Z=k.slice(R+1),N=M.match(S);N&&(L.push(N[1]),Z.unshift(N[2])),Z.length&&(a="/"+Z.join(".")+a),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=c.toASCII(this.hostname));var U=this.port?":"+this.port:"",_=this.hostname||"";this.host=_+U,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!w[d])for(var R=0,F=y.length;R<F;R++){var V=y[R];if(-1!==a.indexOf(V)){var J=encodeURIComponent(V);J===V&&(J=escape(V)),a=a.split(V).join(J)}}var B=a.indexOf("#");-1!==B&&(this.hash=a.substr(B),a=a.slice(0,B));var X=a.indexOf("?");if(-1!==X?(this.search=a.substr(X),this.query=a.substr(X+1),t&&(this.query=O.parse(this.query)),a=a.slice(0,X)):t&&(this.search="",this.query={}),a&&(this.pathname=a),x[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",D=this.search||"";this.path=U+D}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&h.isObject(this.query)&&Object.keys(this.query).length&&(i=O.stringify(this.query));var s=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||x[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+o+r+s+n},n.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(h.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,o=Object.keys(this),i=0;i<o.length;i++){var s=o[i];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),u=0;u<a.length;u++){var c=a[u];"protocol"!==c&&(r[c]=e[c])}return x[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!x[e.protocol]){for(var f=Object.keys(e),l=0;l<f.length;l++){var p=f[l];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||A[e.protocol])r.pathname=e.pathname;else{for(var m=(e.pathname||"").split("/");m.length&&!(e.host=m.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),r.pathname=m.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var d=r.pathname||"",y=r.search||"";r.path=d+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=g||v||r.host&&e.pathname,S=b,w=r.pathname&&r.pathname.split("/")||[],m=e.pathname&&e.pathname.split("/")||[],O=r.protocol&&!x[r.protocol];if(O&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host=null),b=b&&(""===m[0]||""===w[0])),g)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,w=m;else if(m.length)w||(w=[]),w.pop(),w=w.concat(m),r.search=e.search,r.query=e.query;else if(!h.isNullOrUndefined(e.search)){if(O){r.hostname=r.host=w.shift();var E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");E&&(r.auth=E.shift(),r.host=r.hostname=E.shift())}return r.search=e.search,r.query=e.query,h.isNull(r.pathname)&&h.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var j=w.slice(-1)[0],R=(r.host||e.host||w.length>1)&&("."===j||".."===j)||""===j,P=0,C=w.length;C>=0;C--)j=w[C],"."===j?w.splice(C,1):".."===j?(w.splice(C,1),P++):P&&(w.splice(C,1),P--);if(!b&&!S)for(;P--;P)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),R&&"/"!==w.join("/").substr(-1)&&w.push("");var q=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(O){r.hostname=r.host=q?"":w.length?w.shift():"";var E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");E&&(r.auth=E.shift(),r.host=r.hostname=E.shift())}return b=b||r.host&&w.length,b&&!q&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),h.isNull(r.pathname)&&h.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=l.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,r){"use strict";var n=e.exports.Validator=r(6);e.exports.ValidatorResult=r(0).ValidatorResult,e.exports.ValidationError=r(0).ValidationError,e.exports.SchemaError=r(0).SchemaError,e.exports.validate=function(e,t,r){return(new n).validate(e,t,r)}},function(e,t,r){"use strict";function n(e,t,r,n,o){var i=this.validateSchema(e,o,t,r);return!i.valid&&n instanceof Function&&n(i),i.valid}function o(e,t,r,n,o,i){if(!t.properties||void 0===t.properties[o])if(!1===t.additionalProperties)i.addError({name:"additionalProperties",argument:o,message:"additionalProperty "+JSON.stringify(o)+" exists in instance when not allowed"});else{var s=t.additionalProperties||{},a=this.validateSchema(e[o],s,r,n.makeChild(s,o));a.instance!==i.instance[o]&&(i.instance[o]=a.instance),i.importErrors(a)}}function i(e,t,r){var n,o=r.length;for(n=t+1,o;n<o;n++)if(a.deepCompareStrict(e,r[n]))return!1;return!0}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=r(0),u=a.ValidatorResult,c=a.SchemaError,h={};h.ignoreProperties={id:!0,default:!0,description:!0,title:!0,exclusiveMinimum:!0,exclusiveMaximum:!0,additionalItems:!0,$schema:!0,$ref:!0,extends:!0};var f=h.validators={};f.type=function(e,t,r,n){if(void 0===e)return null;var o=new u(e,t,r,n),i=Array.isArray(t.type)?t.type:[t.type];if(!i.some(this.testType.bind(this,e,t,r,n))){var s=i.map(function(e){return e.id&&"<"+e.id+">"||e+""});o.addError({name:"type",argument:s,message:"is not of a type(s) "+s})}return o},f.anyOf=function(e,t,r,o){if(void 0===e)return null;var i=new u(e,t,r,o),s=new u(e,t,r,o);if(!Array.isArray(t.anyOf))throw new c("anyOf must be an array");if(!t.anyOf.some(n.bind(this,e,r,o,function(e){s.importErrors(e)}))){var a=t.anyOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});r.nestedErrors&&i.importErrors(s),i.addError({name:"anyOf",argument:a,message:"is not any of "+a.join(",")})}return i},f.allOf=function(e,t,r,n){if(void 0===e)return null;if(!Array.isArray(t.allOf))throw new c("allOf must be an array");var o=new u(e,t,r,n),i=this;return t.allOf.forEach(function(t,s){var a=i.validateSchema(e,t,r,n);if(!a.valid){var u=t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+s+"]";o.addError({name:"allOf",argument:{id:u,length:a.errors.length,valid:a},message:"does not match allOf schema "+u+" with "+a.errors.length+" error[s]:"}),o.importErrors(a)}}),o},f.oneOf=function(e,t,r,o){if(void 0===e)return null;if(!Array.isArray(t.oneOf))throw new c("oneOf must be an array");var i=new u(e,t,r,o),s=new u(e,t,r,o),a=t.oneOf.filter(n.bind(this,e,r,o,function(e){s.importErrors(e)})).length,h=t.oneOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});return 1!==a&&(r.nestedErrors&&i.importErrors(s),i.addError({name:"oneOf",argument:h,message:"is not exactly one from "+h.join(",")})),i},f.properties=function(e,t,r,n){if(void 0!==e&&e instanceof Object){var o=new u(e,t,r,n),i=t.properties||{};for(var s in i){var a=(e||void 0)&&e[s],c=this.validateSchema(a,i[s],r,n.makeChild(i[s],s));c.instance!==o.instance[s]&&(o.instance[s]=c.instance),o.importErrors(c)}return o}},f.patternProperties=function(e,t,r,n){if(void 0!==e&&this.types.object(e)){var i=new u(e,t,r,n),s=t.patternProperties||{};for(var a in e){var c=!0;for(var h in s){if(new RegExp(h).test(a)){c=!1;var f=this.validateSchema(e[a],s[h],r,n.makeChild(s[h],a));f.instance!==i.instance[a]&&(i.instance[a]=f.instance),i.importErrors(f)}}c&&o.call(this,e,t,r,n,a,i)}return i}},f.additionalProperties=function(e,t,r,n){if(void 0!==e&&this.types.object(e)){if(t.patternProperties)return null;var i=new u(e,t,r,n);for(var s in e)o.call(this,e,t,r,n,s,i);return i}},f.minProperties=function(e,t,r,n){if(!e||"object"!==(void 0===e?"undefined":s(e)))return null;var o=new u(e,t,r,n);return Object.keys(e).length>=t.minProperties||o.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),o},f.maxProperties=function(e,t,r,n){if(!e||"object"!==(void 0===e?"undefined":s(e)))return null;var o=new u(e,t,r,n);return Object.keys(e).length<=t.maxProperties||o.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),o},f.items=function(e,t,r,n){if(!Array.isArray(e))return null;var o=this,i=new u(e,t,r,n);return void 0!==e&&t.items?(e.every(function(e,s){var a=Array.isArray(t.items)?t.items[s]||t.additionalItems:t.items;if(void 0===a)return!0;if(!1===a)return i.addError({name:"items",message:"additionalItems not permitted"}),!1;var u=o.validateSchema(e,a,r,n.makeChild(a,s));return u.instance!==i.instance[s]&&(i.instance[s]=u.instance),i.importErrors(u),!0}),i):i},f.minimum=function(e,t,r,n){if("number"!=typeof e)return null;var o=new u(e,t,r,n),i=!0;return i=t.exclusiveMinimum&&!0===t.exclusiveMinimum?e>t.minimum:e>=t.minimum,i||o.addError({name:"minimum",argument:t.minimum,message:"must have a minimum value of "+t.minimum}),o},f.maximum=function(e,t,r,n){if("number"!=typeof e)return null;var o,i=new u(e,t,r,n);return o=t.exclusiveMaximum&&!0===t.exclusiveMaximum?e<t.maximum:e<=t.maximum,o||i.addError({name:"maximum",argument:t.maximum,message:"must have a maximum value of "+t.maximum}),i},f.divisibleBy=function(e,t,r,n){if("number"!=typeof e)return null;if(0==t.divisibleBy)throw new c("divisibleBy cannot be zero");var o=new u(e,t,r,n);return e/t.divisibleBy%1&&o.addError({name:"divisibleBy",argument:t.divisibleBy,message:"is not divisible by (multiple of) "+JSON.stringify(t.divisibleBy)}),o},f.multipleOf=function(e,t,r,n){if("number"!=typeof e)return null;if(0==t.multipleOf)throw new c("multipleOf cannot be zero");var o=new u(e,t,r,n);return e/t.multipleOf%1&&o.addError({name:"multipleOf",argument:t.multipleOf,message:"is not a multiple of (divisible by) "+JSON.stringify(t.multipleOf)}),o},f.required=function(e,t,r,n){var o=new u(e,t,r,n);return void 0===e&&!0===t.required?o.addError({name:"required",message:"is required"}):e&&"object"===(void 0===e?"undefined":s(e))&&Array.isArray(t.required)&&t.required.forEach(function(t){void 0===e[t]&&o.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})}),o},f.pattern=function(e,t,r,n){if("string"!=typeof e)return null;var o=new u(e,t,r,n);return e.match(t.pattern)||o.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern)}),o},f.format=function(e,t,r,n){var o=new u(e,t,r,n);return o.disableFormat||a.isFormat(e,t.format,this)||o.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),o},f.minLength=function(e,t,r,n){if("string"!=typeof e)return null;var o=new u(e,t,r,n);return e.length>=t.minLength||o.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),o},f.maxLength=function(e,t,r,n){if("string"!=typeof e)return null;var o=new u(e,t,r,n);return e.length<=t.maxLength||o.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),o},f.minItems=function(e,t,r,n){if(!Array.isArray(e))return null;var o=new u(e,t,r,n);return e.length>=t.minItems||o.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),o},f.maxItems=function(e,t,r,n){if(!Array.isArray(e))return null;var o=new u(e,t,r,n);return e.length<=t.maxItems||o.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),o},f.uniqueItems=function(e,t,r,n){function o(e,t,r){for(var n=t+1;n<r.length;n++)if(a.deepCompareStrict(e,r[n]))return!1;return!0}var i=new u(e,t,r,n);return Array.isArray(e)?(e.every(o)||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i):i},f.uniqueItems=function(e,t,r,n){if(!Array.isArray(e))return null;var o=new u(e,t,r,n);return e.every(i)||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o},f.dependencies=function(e,t,r,n){if(!e||"object"!=(void 0===e?"undefined":s(e)))return null;var o=new u(e,t,r,n);for(var i in t.dependencies)if(void 0!==e[i]){var a=t.dependencies[i],c=n.makeChild(a,i);if("string"==typeof a&&(a=[a]),Array.isArray(a))a.forEach(function(t){void 0===e[t]&&o.addError({name:"dependencies",argument:c.propertyPath,message:"property "+t+" not found, required by "+c.propertyPath})});else{var h=this.validateSchema(e,a,r,c);o.instance!==h.instance&&(o.instance=h.instance),h&&h.errors.length&&(o.addError({name:"dependencies",argument:c.propertyPath,message:"does not meet dependency required by "+c.propertyPath}),o.importErrors(h))}}return o},f.enum=function(e,t,r,n){if(!Array.isArray(t.enum))throw new c("enum expects an array",t);if(void 0===e)return null;var o=new u(e,t,r,n);return t.enum.some(a.deepCompareStrict.bind(null,e))||o.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.join(",")}),o},f.not=f.disallow=function(e,t,r,n){var o=this;if(void 0===e)return null;var i=new u(e,t,r,n),s=t.not||t.disallow;return s?(Array.isArray(s)||(s=[s]),s.forEach(function(s){if(o.testType(e,t,r,n,s)){var a=s&&s.id&&"<"+s.id+">"||s;i.addError({name:"not",argument:a,message:"is of prohibited type "+a})}}),i):null},e.exports=h},function(e,t,r){"use strict";function n(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(2),s=r(5),a=r(0),u=a.ValidatorResult,c=a.SchemaError,h=a.SchemaContext,f=function e(){this.customFormats=Object.create(e.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(l),this.attributes=Object.create(s.validators)};f.prototype.customFormats={},f.prototype.schemas=null,f.prototype.types=null,f.prototype.attributes=null,f.prototype.unresolvedRefs=null,f.prototype.addSchema=function(e,t){if(!e)return null;var r=t||e.id;return this.addSubSchema(r,e),r&&(this.schemas[r]=e),this.schemas[r]},f.prototype.addSubSchema=function(e,t){if(t&&"object"==(void 0===t?"undefined":o(t))){if(t.$ref){var r=i.resolve(e,t.$ref);return void(void 0===this.schemas[r]&&(this.schemas[r]=null,this.unresolvedRefs.push(r)))}var n=t.id&&i.resolve(e,t.id),s=n||e;if(n){if(this.schemas[n]){if(!a.deepCompareStrict(this.schemas[n],t))throw new Error("Schema <"+t+"> already exists with different definition");return this.schemas[n]}this.schemas[n]=t;var u=n.replace(/^([^#]*)#$/,"$1");this.schemas[u]=t}return this.addSubSchemaArray(s,t.items instanceof Array?t.items:[t.items]),this.addSubSchemaArray(s,t.extends instanceof Array?t.extends:[t.extends]),this.addSubSchema(s,t.additionalItems),this.addSubSchemaObject(s,t.properties),this.addSubSchema(s,t.additionalProperties),this.addSubSchemaObject(s,t.definitions),this.addSubSchemaObject(s,t.patternProperties),this.addSubSchemaObject(s,t.dependencies),this.addSubSchemaArray(s,t.disallow),this.addSubSchemaArray(s,t.allOf),this.addSubSchemaArray(s,t.anyOf),this.addSubSchemaArray(s,t.oneOf),this.addSubSchema(s,t.not),this.schemas[n]}},f.prototype.addSubSchemaArray=function(e,t){if(t instanceof Array)for(var r=0;r<t.length;r++)this.addSubSchema(e,t[r])},f.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==(void 0===t?"undefined":o(t)))for(var r in t)this.addSubSchema(e,t[r])},f.prototype.setSchemas=function(e){this.schemas=e},f.prototype.getSchema=function(e){return this.schemas[e]},f.prototype.validate=function(e,t,r,n){r||(r={});var o=r.propertyName||"instance",s=i.resolve(r.base||"/",t.id||"");if(n||(n=new h(t,r,o,s,Object.create(this.schemas)),n.schemas[s]||(n.schemas[s]=t)),t){var a=this.validateSchema(e,t,r,n);if(!a)throw new Error("Result undefined");return a}throw new c("no schema specified",t)},f.prototype.validateSchema=function(e,t,r,o){var i=new u(e,t,r,o);if(!t)throw new Error("schema is undefined");if(t.extends)if(t.extends instanceof Array){var f={schema:t,ctx:o};t.extends.forEach(this.schemaTraverser.bind(this,f)),t=f.schema,f.schema=null,f.ctx=null,f=null}else t=a.deepMerge(t,this.superResolve(t.extends,o));var l;if(l=n(t)){var p=this.resolve(t,l,o),m=new h(p.subschema,r,o.propertyPath,p.switchSchema,o.schemas);return this.validateSchema(e,p.subschema,r,m)}var d=r&&r.skipAttributes||[];for(var y in t)if(!s.ignoreProperties[y]&&d.indexOf(y)<0){var v=null,g=this.attributes[y];if(g)v=g.call(this,e,t,r,o);else if(!1===r.allowUnknownAttributes)throw new c("Unsupported attribute: "+y,t);v&&i.importErrors(v)}if("function"==typeof r.rewrite){var b=r.rewrite.call(this,e,t,r,o);i.instance=b}return i},f.prototype.schemaTraverser=function(e,t){e.schema=a.deepMerge(e.schema,this.superResolve(t,e.ctx))},f.prototype.superResolve=function(e,t){var r;return(r=n(e))?this.resolve(e,r,t).subschema:e},f.prototype.resolve=function(e,t,r){if(t=r.resolve(t),r.schemas[t])return{subschema:r.schemas[t],switchSchema:t};var n=i.parse(t),o=n&&n.hash,s=o&&o.length&&t.substr(0,t.length-o.length);if(!s||!r.schemas[s])throw new c("no such schema <"+t+">",e);var u=a.objectGetPath(r.schemas[s],o.substr(1));if(void 0===u)throw new c("no such schema "+o+" located in <"+s+">",e);return{subschema:u,switchSchema:t}},f.prototype.testType=function(e,t,r,n,i){if("function"==typeof this.types[i])return this.types[i].call(this,e);if(i&&"object"==(void 0===i?"undefined":o(i))){var s=this.validateSchema(e,i,r,n);return void 0===s||!(s&&s.errors.length)}return!0};var l=f.prototype.types={};l.string=function(e){return"string"==typeof e},l.number=function(e){return"number"==typeof e&&isFinite(e)},l.integer=function(e){return"number"==typeof e&&e%1==0},l.boolean=function(e){return"boolean"==typeof e},l.array=function(e){return e instanceof Array},l.null=function(e){return null===e},l.date=function(e){return e instanceof Date},l.any=function(e){return!0},l.object=function(e){return e&&"object"===(void 0===e?"undefined":o(e))&&!(e instanceof Array)&&!(e instanceof Date)},e.exports=f},function(e,t,r){"use strict";(function(e,n){var o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s){function a(e){throw new RangeError(T[e])}function u(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function c(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace($,"."),n+u(e.split("."),t).join(".")}function h(e){for(var t,r,n=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function f(e){return u(e,function(e){var t="";return e>65535&&(e-=65536,t+=Z(e>>>10&1023|55296),e=56320|1023&e),t+=Z(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:E}function p(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function m(e,t,r){var n=0;for(e=r?L(e/C):e>>1,e+=L(e/t);e>z*R>>1;n+=E)e=L(e/z);return L(n+(z+1)*e/(e+P))}function d(e){var t,r,n,o,i,s,u,c,h,p,d=[],y=e.length,v=0,g=I,b=q;for(r=e.lastIndexOf(k),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&a("not-basic"),d.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<y;){for(i=v,s=1,u=E;o>=y&&a("invalid-input"),c=l(e.charCodeAt(o++)),(c>=E||c>L((O-v)/s))&&a("overflow"),v+=c*s,h=u<=b?j:u>=b+R?R:u-b,!(c<h);u+=E)p=E-h,s>L(O/p)&&a("overflow"),s*=p;t=d.length+1,b=m(v-i,t,0==i),L(v/t)>O-g&&a("overflow"),g+=L(v/t),v%=t,d.splice(v++,0,g)}return f(d)}function y(e){var t,r,n,o,i,s,u,c,f,l,d,y,v,g,b,S=[];for(e=h(e),y=e.length,t=I,r=0,i=q,s=0;s<y;++s)(d=e[s])<128&&S.push(Z(d));for(n=o=S.length,o&&S.push(k);n<y;){for(u=O,s=0;s<y;++s)(d=e[s])>=t&&d<u&&(u=d);for(v=n+1,u-t>L((O-r)/v)&&a("overflow"),r+=(u-t)*v,t=u,s=0;s<y;++s)if(d=e[s],d<t&&++r>O&&a("overflow"),d==t){for(c=r,f=E;l=f<=i?j:f>=i+R?R:f-i,!(c<l);f+=E)b=c-l,g=E-l,S.push(Z(p(l+b%g,0))),c=L(b/g);S.push(Z(p(c,0))),i=m(r,v,n==o),r=0,++n}++r,++t}return S.join("")}function v(e){return c(e,function(e){return F.test(e)?d(e.slice(4).toLowerCase()):e})}function g(e){return c(e,function(e){return M.test(e)?"xn--"+y(e):e})}var b="object"==i(t)&&t&&!t.nodeType&&t,S="object"==i(e)&&e&&!e.nodeType&&e,w="object"==(void 0===n?"undefined":i(n))&&n;w.global!==w&&w.window!==w&&w.self!==w||(s=w);var A,x,O=2147483647,E=36,j=1,R=26,P=38,C=700,q=72,I=128,k="-",F=/^xn--/,M=/[^\x20-\x7E]/,$=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=E-j,L=Math.floor,Z=String.fromCharCode;if(A={version:"1.4.1",ucs2:{decode:h,encode:f},decode:d,encode:y,toASCII:g,toUnicode:v},"object"==i(r(3))&&r(3))void 0!==(o=function(){return A}.call(t,r,t,e))&&(e.exports=o);else if(b&&S)if(e.exports==b)S.exports=A;else for(x in A)A.hasOwnProperty(x)&&(b[x]=A[x]);else s.punycode=A}(void 0)}).call(t,r(13)(e),r(12))},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var h=0;h<c;++h){var f,l,p,m,d=e[h].replace(a,"%20"),y=d.indexOf(r);y>=0?(f=d.substr(0,y),l=d.substr(y+1)):(f=d,l=""),p=decodeURIComponent(f),m=decodeURIComponent(l),n(s,p)?o(s[p])?s[p].push(m):s[p]=[s[p],m]:s[p]=m}return s};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){switch(void 0===e?"undefined":o(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,u){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===(void 0===e?"undefined":o(e))?n(a(e),function(o){var a=encodeURIComponent(i(o))+r;return s(e[o])?n(e[o],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[o]))}).join(t):u?encodeURIComponent(i(u))+r+encodeURIComponent(i(e)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){"use strict";t.decode=t.parse=r(8),t.encode=t.stringify=r(9)},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(n=window)}e.exports=n},function(e,t,r){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},,function(e,t,r){"use strict";var n={get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if("string"!=typeof t)return r;for(var n=t.split("."),o=e,i=0;i<n.length;i+=1)if(void 0===(o=o[n[i]]))return r;return o}};e.exports=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(15).get,s=r(1),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;n(this,e),this.callsResolvers={},this.requestsTimeoutMs=t}return o(e,null,[{key:"generateSignature",value:function(t){for(var r=0;r<e.MAX_GENERATE_ATTEMPTS;){var n=(new Date).getTime()+"_"+function(){return Math.ceil(1e4*Math.random())}();if(!t[n])return n;r+=1}return null}},{key:"MAX_CALLS_ALLOWED",get:function(){return 100}},{key:"MAX_GENERATE_ATTEMPTS",get:function(){return 1e4}}]),o(e,[{key:"upgradeToWAMP",value:function(t){var r=this;if(t.call&&t.listeners("rpc-response").length)return t;var n=t;return n.on("rpc-response",function(e){if(s.isValid(e,s.RPCResponseSchema)){var t=i(r.callsResolvers,e.procedure+"."+e.signature);if(!t)throw new Error("Unable to find resolving function for procedure "+e.procedure+" with signature "+e.signature);e.success?t.success(e.data):t.fail(e.error),clearTimeout(t.requestTimeout),delete r.callsResolvers[e.procedure][e.signature]}}),n.call=function(n,o){return new Promise(function(i,a){if(r.callsResolvers[n]||(r.callsResolvers[n]={}),Object.keys(r.callsResolvers[n]).length>=e.MAX_CALLS_ALLOWED)return a("No more than "+e.MAX_CALLS_ALLOWED+" calls allowed");var u=e.generateSignature(r.callsResolvers[n]);if(!u)return a("Failed to generate proper signature "+e.MAX_GENERATE_ATTEMPTS+" times");var c=setTimeout(function(){delete r.callsResolvers[n][u],a("RPC response timeout exceeded")},r.requestsTimeoutMs);return r.callsResolvers[n][u]={success:i,fail:a,requestTimeout:c},t.emit("rpc-request",{data:o,procedure:n,signature:u,type:s.RPCRequestSchema.id})})},n}}]),e}();e.exports=a}])});